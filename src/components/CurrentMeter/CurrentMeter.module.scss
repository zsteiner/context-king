@use "sass:math";

@import "../../styles/variables";

$current-meter: 6rem;
$current-border: $border-width * 2;
$current-size: 1rem;

.current {
  position: relative;
  height: $current-meter * 2;
  width: $current-meter * 2;
  text-align: center;
  z-index: 100;

  &Container {
    max-height: $current-meter + 2rem;
    padding: 0 1rem;
    overflow: hidden;
    flex: 0 0 auto;
  }

  &Track {
    position: relative;
    height: $current-meter;
    width: $current-meter * 2;
    background: $grey-light;
    background: linear-gradient(to right, var(--temp-low), var(--temp-high));
    border-top-left-radius: $current-meter * 2;
    border-top-right-radius: $current-meter * 2;
    mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='300' viewBox='0 0 300 300'%3E%3Cpath fill='%23979797' d='M150,300 C67.1572875,300 0,232.842712 0,150 C0,67.1572875 67.1572875,0 150,0 C232.842712,0 300,67.1572875 300,150 C300,232.842712 232.842712,300 150,300 Z M150,271.084337 C216.873033,271.084337 271.084337,216.873033 271.084337,150 C271.084337,83.126967 216.873033,28.9156627 150,28.9156627 C83.126967,28.9156627 28.9156627,83.126967 28.9156627,150 C28.9156627,216.873033 83.126967,271.084337 150,271.084337 Z'/%3E%3C/svg%3E%0A") 0 0;
    mask-repeat: no-repeat;
    mask-size: cover;
  }

  &::after {
    $half-size: math.div($current-size, 2);

    display: block;
    position: absolute;
    content: "";
    top: 50%;
    left: 50%;
    height: $current-size;
    width: $current-size;
    margin: -($half-size);
    background-color: var(--marker-color);
    border: $current-border solid $white;
    border-radius: 50%;
    transform:
      rotate(var(--current-position))
      translate($current-meter - $half-size);
  }

  &Temperature {
    position: relative;
    top: -1em;
    font-size: math.div($current-meter, 1.75);
    font-weight: 900;
  }

  &Label {
    position: absolute;
    bottom: $current-meter - $current-size - 1rem;
    font-size: 1.25em;
    font-weight: 600;

    &:first-of-type {
      left: -0.25em;
    }

    &:last-of-type {
      right: -0.5em;
    }
  }
}
